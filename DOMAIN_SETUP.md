# Подключение собственного домена к Vercel

## Шаг 1: Подготовка домена

Убедитесь, что у вас есть:
- Зарегистрированный домен (например, `example.com`)
- Доступ к настройкам DNS вашего домена (через регистратора домена)

## Шаг 2: Добавление домена в Vercel

1. Откройте [Vercel Dashboard](https://vercel.com/dashboard)
2. Выберите ваш проект `vsl-builder`
3. Перейдите в **Settings** → **Domains**
4. Нажмите **Add Domain**
5. Введите ваш домен (например, `example.com` или `www.example.com`)
6. Нажмите **Add**

## Шаг 3: Настройка DNS записей

Vercel покажет вам, какие DNS записи нужно добавить. Обычно это:

### Вариант A: Поддомен (например, `app.example.com`)

Добавьте CNAME запись:
- **Type**: `CNAME`
- **Name**: `app` (или любое другое имя поддомена)
- **Value**: `cname.vercel-dns.com.` (или значение, которое покажет Vercel)
- **TTL**: `3600` (или Auto)

### Вариант B: Корневой домен (например, `example.com`)

Добавьте A записи:
- **Type**: `A`
- **Name**: `@` (или пустое, для корневого домена)
- **Value**: IP адреса Vercel (Vercel покажет их, обычно это 4 IP адреса)
- **TTL**: `3600` (или Auto)

Или используйте ALIAS/ANAME запись (если поддерживается вашим DNS провайдером):
- **Type**: `ALIAS` или `ANAME`
- **Name**: `@`
- **Value**: `cname.vercel-dns.com.`

## Шаг 4: Ожидание распространения DNS

После добавления DNS записей:
- Подождите 5-60 минут для распространения DNS изменений
- Vercel автоматически проверит и активирует домен
- Статус изменится с "Pending" на "Valid"

## Шаг 5: Обновление переменных окружения

После активации домена обновите переменные окружения в Vercel:

1. Перейдите в **Settings** → **Environment Variables**
2. Обновите `NEXT_PUBLIC_APP_URL`:
   - Старое значение: `https://vsl-builder-xxx.vercel.app`
   - Новое значение: `https://your-domain.com` (ваш домен)
3. Обновите `ALLOWED_DOMAIN`:
   - Старое значение: `vsl-builder-xxx.vercel.app`
   - Новое значение: `your-domain.com` (ваш домен без https://)
4. Сохраните изменения
5. Перезапустите деплой (Redeploy)

## Шаг 6: Проверка работы

1. Откройте ваш домен в браузере: `https://your-domain.com`
2. Проверьте админ-панель: `https://your-domain.com/admin`
3. Проверьте публичный лендинг: `https://your-domain.com/v/your-slug`

## Настройка SSL сертификата

Vercel автоматически:
- Выдаст SSL сертификат (Let's Encrypt)
- Настроит HTTPS
- Обновит сертификат автоматически

Обычно это занимает несколько минут после активации домена.

## Рекомендации

### Для корневого домена + www

Если хотите использовать и `example.com` и `www.example.com`:

1. Добавьте оба домена в Vercel
2. Настройте редирект:
   - В Vercel Dashboard → Settings → Domains
   - Выберите основной домен (например, `example.com`)
   - Настройте редирект с `www.example.com` на `example.com` (или наоборот)

### Для поддомена

Если используете поддомен (например, `app.example.com`):
- Проще настроить (только CNAME запись)
- Не требует настройки корневого домена
- Рекомендуется для начала

## Troubleshooting

### Домен не активируется

1. Проверьте DNS записи через [DNS Checker](https://dnschecker.org/)
2. Убедитесь, что записи добавлены правильно
3. Подождите до 24 часов (обычно достаточно 1 часа)
4. Проверьте логи в Vercel Dashboard

### SSL сертификат не выдается

1. Убедитесь, что DNS записи настроены правильно
2. Проверьте, что домен указывает на Vercel
3. Подождите несколько минут
4. Если проблема сохраняется, обратитесь в поддержку Vercel

### Редирект на Vercel login

Если после подключения домена все еще редиректит на login:
1. Проверьте, что обновили `NEXT_PUBLIC_APP_URL` и `ALLOWED_DOMAIN`
2. Перезапустите деплой
3. Очистите кэш браузера
4. Проверьте, что используете production deployment, а не preview

## Полезные ссылки

- [Vercel Domains Documentation](https://vercel.com/docs/concepts/projects/domains)
- [DNS Configuration Guide](https://vercel.com/docs/concepts/projects/domains/add-a-domain)
